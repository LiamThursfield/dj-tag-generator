import{_ as E}from"./AudioEffectsSelector.vue_vue_type_script_setup_true_lang-Cy8rTiw-.js";import{_ as N}from"./index-Dpa1nga5.js";import{a as S,q as T,d as L,_ as B}from"./index-D-7TF9b1.js";import{i as w,a as q,_ as F,r as G}from"./AppLayout.vue_vue_type_script_setup_true_lang-jaZdxn2h.js";import{d as J,a as V,G as Q,x as R,c as l,b as x,u as n,h as U,w as h,e,t as d,o as i,F as C,m as z,n as j,f as H,g as c,i as v,l as O}from"./app-DNqUs0zK.js";import"./Checkbox.vue_vue_type_script_setup_true_lang-C464roCH.js";import"./useForwardPropsEmits-BsX2H7u0.js";import"./VisuallyHidden-TcAOn1RK.js";import"./index-BCdY_7Bm.js";import"./useForwardExpose-BBcw7_vY.js";import"./check-DMSybNh9.js";import"./Label.vue_vue_type_script_setup_true_lang-CBtUoOr6.js";import"./music-BalmX8-o.js";const a=(t,r)=>({url:a.url(t,r),method:"get"});a.definition={methods:["get","head"],url:"/play/{version}"};a.url=(t,r)=>{(typeof t=="string"||typeof t=="number")&&(t={version:t}),typeof t=="object"&&!Array.isArray(t)&&"id"in t&&(t={version:t.id}),Array.isArray(t)&&(t={version:t[0]}),t=S(t);const m={version:typeof t.version=="object"?t.version.id:t.version};return a.definition.url.replace("{version}",m.version.toString()).replace(/\/+$/,"")+T(r)};a.get=(t,r)=>({url:a.url(t,r),method:"get"});a.head=(t,r)=>({url:a.url(t,r),method:"head"});const k=(t,r)=>({action:a.url(t,r),method:"get"});k.get=(t,r)=>({action:a.url(t,r),method:"get"});k.head=(t,r)=>({action:a.url(t,{[r?.mergeQuery?"mergeQuery":"query"]:{_method:"HEAD",...r?.query??r?.mergeQuery??{}}}),method:"get"});a.form=k;Object.assign(a,a);const I={class:"mx-auto max-w-5xl space-y-6 p-4 sm:p-6 lg:p-8"},P={class:"overflow-hidden border border-border bg-card shadow sm:rounded-lg"},Y={class:"flex items-center justify-between px-4 py-5 sm:px-6"},K={class:"mt-1 max-w-2xl text-sm text-gray-500 dark:text-gray-400"},M={class:"border-t border-gray-200 px-4 py-5 sm:p-0 dark:border-gray-700"},W={class:"sm:divide-y sm:divide-gray-200 dark:sm:divide-gray-700"},X={class:"py-4 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6 sm:py-5"},Z={class:"mt-1 text-sm text-gray-900 italic sm:col-span-2 sm:mt-0 dark:text-gray-100"},ee={class:"grid grid-cols-1 gap-6 lg:grid-cols-3"},te={class:"space-y-4 lg:col-span-2"},se={class:"flex items-center justify-between bg-muted/30 px-4 py-4 sm:px-6"},re={class:"flex items-center space-x-3"},oe={class:"text-sm font-bold tracking-wider text-foreground uppercase"},ae={class:"flex items-center space-x-4"},de=["onClick"],ie={class:"space-y-4 p-4 sm:p-6"},le={key:0,class:"space-y-3 rounded-lg border border-primary/20 bg-primary/5 p-4"},ne={class:"flex items-center justify-between text-xs font-bold tracking-widest text-primary uppercase"},ce={controls:"",class:"h-8 w-full"},ue=["src"],me={key:1,class:"space-y-3"},pe={controls:"",class:"w-full"},fe=["src"],ge={class:"flex items-center justify-between"},xe={class:"text-xs text-gray-500 italic dark:text-gray-400"},_e=["href"],he={key:2,class:"rounded border border-red-100 bg-red-50 p-3 dark:border-red-900/30 dark:bg-red-900/10"},ye={class:"text-xs font-medium text-red-600 dark:text-red-400"},be={key:3,class:"flex items-center justify-center p-8"},ve={class:"space-y-4"},ke={class:"sticky top-6 overflow-hidden border border-border bg-card shadow sm:rounded-lg"},we={class:"space-y-4 p-4"},Ve={key:0,class:"mt-2 text-center text-xs text-destructive"},Ce={class:"flex justify-start border-t border-border pt-4"},Qe=J({__name:"Show",props:{tag:{},tagVersionLimit:{}},setup(t){const r=t,m=V(()=>r.tag.versions.length>=r.tagVersionLimit),A=[{title:"Dashboard",href:L.url()},{title:"DJ Tags",href:w.url()},{title:`Tag #${r.tag.id}`,href:q.url(r.tag.id)}],$=f=>{switch(f){case"completed":return"bg-emerald-500/10 text-emerald-500";case"failed":return"bg-destructive/10 text-destructive";case"processing":return"bg-primary/10 text-primary";default:return"bg-muted text-muted-foreground"}},y=f=>f?a.url(f):null,u=V(()=>r.tag.versions[0]||null),p=Q({audio_effects:{...{pitch:0,speed:1,reverb:"none",bass_boost:!1,tremolo:!1,echo:!1,chorus:!1,lofi_telephone:!1,bitcrush:!1,normalize:!0},...u.value?.audio_effects||{}}}),D=()=>{p.post(G.url(r.tag.id),{preserveScroll:!0,onSuccess:()=>{}})},_=R(null);return(f,o)=>(i(),l(C,null,[x(n(U),{title:`Tag #${t.tag.id}`},null,8,["title"]),x(F,{breadcrumbs:A},{default:h(()=>[e("div",I,[e("div",P,[e("div",Y,[e("div",null,[o[1]||(o[1]=e("h3",{class:"text-lg leading-6 font-medium text-gray-900 dark:text-gray-100"}," DJ Tag Details ",-1)),e("p",K," Generated via "+d(t.tag.service)+" (Voice: "+d(t.tag.voice_id)+") ",1)])]),e("div",M,[e("dl",W,[e("div",X,[o[2]||(o[2]=e("dt",{class:"text-sm font-medium text-gray-500 dark:text-gray-400"}," Script Text ",-1)),e("dd",Z,' "'+d(t.tag.text)+'" ',1)])])])]),e("div",ee,[e("div",te,[(i(!0),l(C,null,z(t.tag.versions,s=>(i(),l("div",{key:s.id,class:j(["overflow-hidden border border-border bg-card shadow sm:rounded-lg",{"border-primary ring-1 ring-primary":s.id===u.value?.id}])},[e("div",se,[e("div",re,[e("span",oe," Version "+d(s.version_number),1),s.id===u.value?.id?(i(),H(n(N),{key:0,variant:"secondary",class:"text-xs uppercase"},{default:h(()=>[...o[3]||(o[3]=[v(" Current ",-1)])]),_:1})):c("",!0)]),e("div",ae,[e("span",{class:j(["rounded-full px-2.5 py-0.5 text-xs font-bold tracking-wide uppercase",$(s.status)])},d(s.status),3),s.status==="completed"&&s.id!==u.value?.id?(i(),l("button",{key:0,onClick:b=>_.value=_.value===s.id?null:s.id,class:"text-xs font-semibold text-primary hover:text-primary/80"},d(_.value===s.id?"Hide Comparison":"Compare"),9,de)):c("",!0)])]),e("div",ie,[_.value===s.id?(i(),l("div",le,[e("div",ne,[o[4]||(o[4]=e("span",null,"Comparison",-1)),e("span",null,"Version "+d(u.value?.version_number)+" (Current)",1)]),e("audio",ce,[e("source",{src:y(u.value?.id),type:"audio/mpeg"},null,8,ue)])])):c("",!0),s.status==="completed"&&s.audio_path?(i(),l("div",me,[e("audio",pe,[e("source",{src:y(s.id),type:"audio/mpeg"},null,8,fe)]),e("div",ge,[e("div",xe," Effects: "+d(s.audio_effects&&Object.entries(s.audio_effects).filter(([b,g])=>g&&g!==1&&g!==0).map(([b,g])=>`${b}: ${g}`).join(", ")||"None"),1),e("a",{href:y(s.id),download:"",class:"text-xs font-bold tracking-wider text-indigo-600 uppercase hover:text-indigo-800 hover:underline dark:text-indigo-400 dark:hover:text-indigo-300"}," Download ",8,_e)])])):c("",!0),s.status==="failed"?(i(),l("div",he,[e("p",ye," Error: "+d(s.error_message),1)])):c("",!0),s.status==="processing"||s.status==="pending"?(i(),l("div",be,[...o[5]||(o[5]=[e("div",{class:"h-8 w-8 animate-spin rounded-full border-b-2 border-primary"},null,-1)])])):c("",!0)])],2))),128))]),e("div",ve,[e("div",ke,[o[6]||(o[6]=e("div",{class:"border-b border-border bg-muted/30 px-4 py-4 sm:px-6"},[e("h4",{class:"text-sm font-bold tracking-wider text-foreground uppercase"}," Experiment with Effects "),e("p",{class:"mt-1 text-xs text-muted-foreground"}," Create a new version using the raw master audio. No extra AI credits used. ")],-1)),e("div",we,[x(E,{modelValue:n(p).audio_effects,"onUpdate:modelValue":o[0]||(o[0]=s=>n(p).audio_effects=s),compact:""},null,8,["modelValue"]),x(n(B),{onClick:D,disabled:n(p).processing||m.value,class:"mt-4 h-10 w-full text-xs tracking-widest uppercase"},{default:h(()=>[v(d(n(p).processing?"Generating...":m.value?"Version Limit Reached":"Create New Version"),1)]),_:1},8,["disabled"]),m.value?(i(),l("p",Ve," You have reached the maximum of "+d(t.tagVersionLimit)+" versions for this tag. ",1)):c("",!0)])])])]),e("div",Ce,[x(n(O),{href:n(w).url(),class:"flex items-center text-xs font-bold tracking-widest text-muted-foreground uppercase hover:text-foreground"},{default:h(()=>[...o[7]||(o[7]=[v(" â† Back to DJ Tags ",-1)])]),_:1},8,["href"])])])]),_:1})],64))}});export{Qe as default};
